<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thanh to√°n VNPay - B√°n Hoa T∆∞∆°i</title>
    <link th:href="@{/css/payment.css}" rel="stylesheet">
    <link th:href="@{/css/fragments.css}" rel="stylesheet">
</head>
<body>

<!-- Header -->
<div th:replace="~{customer/fragments/common_elements :: header}"></div>

<div class="container">
    <div class="payment-container">
        <h1>üí≥ Thanh to√°n VNPay</h1>

        <div class="order-summary">
            <h3>Th√¥ng tin ƒë∆°n h√†ng</h3>
            <p><strong>M√£ ƒë∆°n h√†ng:</strong> <span th:text="'DH' + ${order.orderId}"></span></p>
            <p><strong>Kh√°ch h√†ng:</strong> <span th:text="${order.customerName}"></span></p>
            <p><strong>S·ªë ƒëi·ªán tho·∫°i:</strong> <span th:text="${order.phone}"></span></p>
            <p><strong>ƒê·ªãa ch·ªâ:</strong> <span th:text="${order.address}"></span></p>
            <p th:if="${order.deliveryDate != null}">
                <strong>Ng√†y giao h√†ng:</strong> 
                <span th:text="${#temporals.format(order.deliveryDate, 'dd-MM-yyyy')}"></span>
            </p>

            <!-- Items List -->
            <div class="payment-items-list">
                <div th:each="item : ${order.items}" class="payment-item">
                    <span th:text="${item.flower.flowerName} + ' (x' + ${item.quantity} + ')'"></span>
                    <span th:text="${#numbers.formatDecimal(item.priceAtPurchase * item.quantity, 0, 'COMMA', 0, 'POINT')} + ' ƒë'"></span>
                </div>
            </div>

            <div class="amount-display">
                T·ªïng th√†nh ti·ªÅn: <span th:text="${#numbers.formatDecimal(order.totalAmount, 0, 'COMMA', 0, 'POINT')} + ' ƒë'"></span>
            </div>
        </div>

        <div class="payment-methods">
            <!-- QR Code Payment -->
            <div class="payment-method">
                <h3>üì± Qu√©t m√£ QR</h3>
                <div class="qr-code-container" th:if="${qrCodeBase64 != null}">
                    <img th:src="${qrCodeBase64}" alt="VNPay QR Code">
                </div>
                <div class="instructions">
                    <h4>H∆∞·ªõng d·∫´n:</h4>
                    <ol>
                        <li>M·ªü ·ª©ng d·ª•ng VNPay tr√™n ƒëi·ªán tho·∫°i</li>
                        <li>Ch·ªçn ch·ª©c nƒÉng qu√©t m√£ QR</li>
                        <li>Qu√©t m√£ QR b√™n tr√™n</li>
                        <li>X√°c nh·∫≠n thanh to√°n</li>
                    </ol>
                </div>
            </div>

            <!-- Payment Link -->
            <div class="payment-method">
                <h3>üîó Thanh to√°n b·∫±ng link</h3>
                <p class="text-muted">Nh·∫•n v√†o n√∫t b√™n d∆∞·ªõi ƒë·ªÉ chuy·ªÉn ƒë·∫øn trang thanh to√°n VNPay</p>
                <a th:href="${paymentUrl}" target="_blank" class="btn-payment">Thanh to√°n ngay</a>
                <div class="instructions">
                    <h4>H∆∞·ªõng d·∫´n:</h4>
                    <ol>
                        <li>Nh·∫•n n√∫t "Thanh to√°n ngay"</li>
                        <li>Ch·ªçn ph∆∞∆°ng th·ª©c thanh to√°n tr√™n VNPay</li>
                        <li>Ho√†n t·∫•t th·ªß t·ª•c thanh to√°n</li>
                        <li>Quay l·∫°i trang web ƒë·ªÉ x√°c nh·∫≠n</li>
                    </ol>
                </div>
            </div>
        </div>

        <div class="payment-note">
            <p>‚ö†Ô∏è L∆∞u √Ω: Sau khi thanh to√°n th√†nh c√¥ng, b·∫°n s·∫Ω ƒë∆∞·ª£c chuy·ªÉn v·ªÅ trang x√°c nh·∫≠n t·ª± ƒë·ªông.</p>
            <p>N·∫øu kh√¥ng t·ª± ƒë·ªông chuy·ªÉn, vui l√≤ng quay l·∫°i trang n√†y sau khi ho√†n t·∫•t thanh to√°n.</p>
        </div>
    </div>
</div>

<!-- Footer -->
<div th:replace="~{customer/fragments/common_elements :: footer}"></div>

</body>
</html>
